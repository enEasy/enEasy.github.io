[{"title":"Hbase语法实验","url":"/2021/05/08/Hbase%E8%AF%AD%E6%B3%95%E5%AE%9E%E9%AA%8C/","content":"<h1 id=\"Hbase实验二\"><a href=\"#Hbase实验二\" class=\"headerlink\" title=\"Hbase实验二\"></a>Hbase实验二</h1><h2 id=\"1、一般操作\"><a href=\"#1、一般操作\" class=\"headerlink\" title=\"1、一般操作\"></a>1、一般操作</h2><h3 id=\"查询服务器状态\"><a href=\"#查询服务器状态\" class=\"headerlink\" title=\"查询服务器状态\"></a>查询服务器状态</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">status</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"../images/Hbase%E8%AF%AD%E6%B3%95%E5%AE%9E%E9%AA%8C/1620197294908.png\" alt=\"1620197294908\"></p>\n<h3 id=\"查询Hbase版本\"><a href=\"#查询Hbase版本\" class=\"headerlink\" title=\"查询Hbase版本\"></a>查询Hbase版本</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">version</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"查看所有表\"><a href=\"#查看所有表\" class=\"headerlink\" title=\"查看所有表\"></a>查看所有表</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">version</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"../images/Hbase%E8%AF%AD%E6%B3%95%E5%AE%9E%E9%AA%8C/1620199317627.png\" alt=\"1620199317627\"></p>\n<span id=\"more\"></span>\n\n<h2 id=\"2、增删改\"><a href=\"#2、增删改\" class=\"headerlink\" title=\"2、增删改\"></a>2、增删改</h2><h3 id=\"创建一个表\"><a href=\"#创建一个表\" class=\"headerlink\" title=\"创建一个表\"></a>创建一个表</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">create &#x27;member057&#x27;,&#x27;member_id&#x27;,&#x27;address&#x27;,&#x27;info&#x27;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"../images/Hbase%E8%AF%AD%E6%B3%95%E5%AE%9E%E9%AA%8C/1620199328321.png\" alt=\"1620199328321\"></p>\n<p><img src=\"file://D:/Blog/source/_posts/Hbase%E5%AE%9E%E9%AA%8C%E4%BA%8C.assets/1620199317627.png?lastModify=1620442179\" alt=\"img\"></p>\n<h3 id=\"获得表的描述\"><a href=\"#获得表的描述\" class=\"headerlink\" title=\"获得表的描述\"></a>获得表的描述</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">describe &#x27;member057&#x27; </span><br></pre></td></tr></table></figure>\n\n<p><img src=\"Hbase%E5%AE%9E%E9%AA%8C%E4%BA%8C.assets/1620199337845.png\" alt=\"1620199337845\"></p>\n<h3 id=\"添加一个列族\"><a href=\"#添加一个列族\" class=\"headerlink\" title=\"添加一个列族\"></a>添加一个列族</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">alter &#x27;member057&#x27;,&#x27;id&#x27;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"Hbase%E5%AE%9E%E9%AA%8C%E4%BA%8C.assets/1620199345105.png\" alt=\"1620199345105\"></p>\n<h3 id=\"添加数据\"><a href=\"#添加数据\" class=\"headerlink\" title=\"添加数据\"></a>添加数据</h3><ul>\n<li><h3 id=\"在HBase-shell中，我们可以通过put命令来插入数据。列族下的列不需要提前创建，在需要时通过：来指定即可。添加数据如下\"><a href=\"#在HBase-shell中，我们可以通过put命令来插入数据。列族下的列不需要提前创建，在需要时通过：来指定即可。添加数据如下\" class=\"headerlink\" title=\"在HBase  shell中，我们可以通过put命令来插入数据。列族下的列不需要提前创建，在需要时通过：来指定即可。添加数据如下\"></a>在HBase  shell中，我们可以通过put命令来插入数据。列族下的列不需要提前创建，在需要时通过：来指定即可。添加数据如下</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">put &#x27;member057&#x27;, &#x27;debugo&#x27;,&#x27;id&#x27;,&#x27;11&#x27;</span><br><span class=\"line\">put &#x27;member057&#x27;, &#x27;debugo&#x27;,&#x27;info:age&#x27;,&#x27;27&#x27;</span><br><span class=\"line\">put &#x27;member057&#x27;, &#x27;debugo&#x27;,&#x27;info:birthday&#x27;,&#x27;1991-04-04&#x27;</span><br><span class=\"line\">put &#x27;member057&#x27;, &#x27;debugo&#x27;,&#x27;info:industry&#x27;, &#x27;it&#x27;</span><br><span class=\"line\">put &#x27;member057&#x27;, &#x27;debugo&#x27;,&#x27;address:city&#x27;,&#x27;Shanghai&#x27;</span><br><span class=\"line\">put &#x27;member057&#x27;, &#x27;debugo&#x27;,&#x27;address:country&#x27;,&#x27;China&#x27;</span><br><span class=\"line\">put &#x27;member057&#x27;, &#x27;Sariel&#x27;, &#x27;id&#x27;, &#x27;21&#x27;</span><br><span class=\"line\">put &#x27;member057&#x27;, &#x27;Sariel&#x27;,&#x27;info:age&#x27;, &#x27;26&#x27;</span><br><span class=\"line\">put &#x27;member057&#x27;, &#x27;Sariel&#x27;,&#x27;info:birthday&#x27;, &#x27;1992-05-09&#x27;</span><br><span class=\"line\">put &#x27;member057&#x27;, &#x27;Sariel&#x27;,&#x27;info:industry&#x27;, &#x27;it&#x27;</span><br><span class=\"line\">put &#x27;member057&#x27;, &#x27;Sariel&#x27;,&#x27;address:city&#x27;, &#x27;Beijing&#x27;</span><br><span class=\"line\">put &#x27;member057&#x27;, &#x27;Sariel&#x27;,&#x27;address:country&#x27;, &#x27;China&#x27;</span><br><span class=\"line\">put &#x27;member057&#x27;, &#x27;Elvis&#x27;, &#x27;id&#x27;, &#x27;22&#x27;</span><br><span class=\"line\">put &#x27;member057&#x27;, &#x27;Elvis&#x27;,&#x27;info:age&#x27;, &#x27;26&#x27;</span><br><span class=\"line\">put &#x27;member057&#x27;, &#x27;Elvis&#x27;,&#x27;info:birthday&#x27;, &#x27;1992-09-14&#x27;</span><br><span class=\"line\">put &#x27;member057&#x27;, &#x27;Elvis&#x27;,&#x27;info:industry&#x27;, &#x27;it&#x27;</span><br><span class=\"line\">put &#x27;member057&#x27;, &#x27;Elvis&#x27;,&#x27;address:city&#x27;, &#x27;Beijing&#x27;</span><br><span class=\"line\">put &#x27;member057&#x27;, &#x27;Elvis&#x27;,&#x27;address:country&#x27;, &#x27;china</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"Hbase%E5%AE%9E%E9%AA%8C%E4%BA%8C.assets/1620199354966.png\" alt=\"1620199354966\"></p>\n</li>\n</ul>\n<h3 id=\"查看表数据\"><a href=\"#查看表数据\" class=\"headerlink\" title=\"查看表数据\"></a>查看表数据</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">scan &#x27;member057&#x27;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"Hbase%E5%AE%9E%E9%AA%8C%E4%BA%8C.assets/1620199360333.png\" alt=\"1620199360333\"></p>\n<h3 id=\"删除一个列族\"><a href=\"#删除一个列族\" class=\"headerlink\" title=\"删除一个列族\"></a>删除一个列族</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">alter &#x27;member057&#x27;, &#123;NAME =&gt; &#x27;member_id&#x27;, METHOD =&gt; &#x27;delete&#x27;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"Hbase%E5%AE%9E%E9%AA%8C%E4%BA%8C.assets/1620199365309.png\" alt=\"1620199365309\"></p>\n<h3 id=\"删除列\"><a href=\"#删除列\" class=\"headerlink\" title=\"删除列\"></a>删除列</h3><ul>\n<li><p>通过delete命令，我们可以删除id为某个值’info:age’ 字段，接下来的get就无值了：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">delete &#x27;member057&#x27;,&#x27;debugo&#x27;,&#x27;info:age&#x27;</span><br><span class=\"line\">get &#x27;member057&#x27;,&#x27;debugo&#x27;,&#x27;info:age&#x27;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"Hbase%E5%AE%9E%E9%AA%8C%E4%BA%8C.assets/1620199370489.png\" alt=\"1620199370489\"></p>\n</li>\n<li><p>删除整行的值，用deleteall命令</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">deleteall &#x27;member057&#x27;,&#x27;debugo&#x27;</span><br><span class=\"line\">get &#x27;member057&#x27;,&#x27;debugo&#x27;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"Hbase%E5%AE%9E%E9%AA%8C%E4%BA%8C.assets/1620199374998.png\" alt=\"1620199374998\"></p>\n</li>\n<li><p>通过enable和disable来启用/禁用这个表，相应的可以通过is_enabled和is_disabled来检查表是否被禁用</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">is_enabled &#x27;member057&#x27;</span><br><span class=\"line\">is_disabled &#x27;member057&#x27;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"Hbase%E5%AE%9E%E9%AA%8C%E4%BA%8C.assets/1620199379588.png\" alt=\"1620199379588\"></p>\n<p><img src=\"Hbase%E5%AE%9E%E9%AA%8C%E4%BA%8C.assets/1620199450690.png\" alt=\"1620199450690\"></p>\n</li>\n<li><p>使用exists来检查表是否存在</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">exists &#x27;member057&#x27;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"Hbase%E5%AE%9E%E9%AA%8C%E4%BA%8C.assets/1620199457606.png\" alt=\"1620199457606\"></p>\n</li>\n<li><p>删除表需要先将表disable</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">disable &#x27;member057&#x27;</span><br><span class=\"line\">drop &#x27;member057&#x27;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"Hbase%E5%AE%9E%E9%AA%8C%E4%BA%8C.assets/1620199462001.png\" alt=\"1620199462001\"></p>\n</li>\n</ul>\n<h2 id=\"3、查询\"><a href=\"#3、查询\" class=\"headerlink\" title=\"3、查询\"></a>3、查询</h2><h3 id=\"查询表中有多少行，用count命令：\"><a href=\"#查询表中有多少行，用count命令：\" class=\"headerlink\" title=\"查询表中有多少行，用count命令：\"></a>查询表中有多少行，用count命令：</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">count &#x27;member057&#x27;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"Hbase%E5%AE%9E%E9%AA%8C%E4%BA%8C.assets/1620199466891.png\" alt=\"1620199466891\"></p>\n<h3 id=\"get\"><a href=\"#get\" class=\"headerlink\" title=\"get\"></a>get</h3><ul>\n<li><p>获取一个id的所有数据</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">get &#x27;member057&#x27;, &#x27;Sariel&#x27;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"Hbase%E5%AE%9E%E9%AA%8C%E4%BA%8C.assets/1620199472428.png\" alt=\"1620199472428\"></p>\n</li>\n<li><p>获得一个id，一个列族（一个列）中的所有数据：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">get &#x27;member057&#x27;, &#x27;Sariel&#x27;, &#x27;info&#x27;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"Hbase%E5%AE%9E%E9%AA%8C%E4%BA%8C.assets/1620199476998.png\" alt=\"1620199476998\"></p>\n</li>\n</ul>\n<h3 id=\"查询整表数据\"><a href=\"#查询整表数据\" class=\"headerlink\" title=\"查询整表数据\"></a>查询整表数据</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">scan &#x27;member057&#x27;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"Hbase%E5%AE%9E%E9%AA%8C%E4%BA%8C.assets/1620199481320.png\" alt=\"1620199481320\"></p>\n<h3 id=\"扫描整个列族\"><a href=\"#扫描整个列族\" class=\"headerlink\" title=\"扫描整个列族\"></a>扫描整个列族</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">scan &#x27;member057&#x27;, &#123;COLUMN=&gt;&#x27;info&#x27;&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"Hbase%E5%AE%9E%E9%AA%8C%E4%BA%8C.assets/1620199492029.png\" alt=\"1620199492029\"></p>\n<h3 id=\"指定扫描期中的某个列\"><a href=\"#指定扫描期中的某个列\" class=\"headerlink\" title=\"指定扫描期中的某个列\"></a>指定扫描期中的某个列</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">scan &#x27;member057&#x27;, &#123;COLUMNS=&gt; &#x27;info:birthday&#x27;&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"Hbase%E5%AE%9E%E9%AA%8C%E4%BA%8C.assets/1620199498972.png\" alt=\"1620199498972\"></p>\n<ul>\n<li><h3 id=\"除了列（COLUMNS）修饰词外，HBase-还支持-Limit（限制查询结果行数），STARTROW（ROWKEY-起始行。会先根据这个-key-定位到-region，再向后扫描）、STOPROW-结束行-、TIMERANGE（限定时间戳范围）、VERSIONS（版本数）、和-FILTER（按条件过滤行）等。比如我们从-Sariel-这个-rowkey-开始，找下一个行的最新版本：\"><a href=\"#除了列（COLUMNS）修饰词外，HBase-还支持-Limit（限制查询结果行数），STARTROW（ROWKEY-起始行。会先根据这个-key-定位到-region，再向后扫描）、STOPROW-结束行-、TIMERANGE（限定时间戳范围）、VERSIONS（版本数）、和-FILTER（按条件过滤行）等。比如我们从-Sariel-这个-rowkey-开始，找下一个行的最新版本：\" class=\"headerlink\" title=\"除了列（COLUMNS）修饰词外，HBase 还支持 Limit（限制查询结果行数），STARTROW（ROWKEY 起始行。会先根据这个 key 定位到 region，再向后扫描）、STOPROW(结束行)、TIMERANGE（限定时间戳范围）、VERSIONS（版本数）、和 FILTER（按条件过滤行）等。比如我们从 Sariel 这个 rowkey 开始，找下一个行的最新版本：\"></a>除了列（COLUMNS）修饰词外，HBase 还支持 Limit（限制查询结果行数），STARTROW（ROWKEY 起始行。会先根据这个 key 定位到 region，再向后扫描）、STOPROW(结束行)、TIMERANGE（限定时间戳范围）、VERSIONS（版本数）、和 FILTER（按条件过滤行）等。比如我们从 Sariel 这个 rowkey 开始，找下一个行的最新版本：</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">scan &#x27;member057&#x27;, &#123; STARTROW =&gt; &#x27;Sariel&#x27;, LIMIT=&gt;1,</span><br><span class=\"line\">VERSIONS=&gt;1&#125;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"Hbase%E5%AE%9E%E9%AA%8C%E4%BA%8C.assets/1620199504249.png\" alt=\"1620199504249\"></p>\n</li>\n</ul>\n<h3 id=\"Filter-是一个非常强大的修饰词，可以设定一系列条件来进行过滤。比如我们要限制某个列的值等于-26\"><a href=\"#Filter-是一个非常强大的修饰词，可以设定一系列条件来进行过滤。比如我们要限制某个列的值等于-26\" class=\"headerlink\" title=\"Filter 是一个非常强大的修饰词，可以设定一系列条件来进行过滤。比如我们要限制某个列的值等于 26\"></a>Filter 是一个非常强大的修饰词，可以设定一系列条件来进行过滤。比如我们要限制某个列的值等于 26</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">scan &#x27;member057&#x27;, FILTER=&gt;&quot;ValueFilter(=,&#x27;binary:26&#x27;)&quot;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"Hbase%E5%AE%9E%E9%AA%8C%E4%BA%8C.assets/1620199511422.png\" alt=\"1620199511422\"></p>\n<h3 id=\"值包含-6-这个值：\"><a href=\"#值包含-6-这个值：\" class=\"headerlink\" title=\"值包含 6 这个值：\"></a>值包含 6 这个值：</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">scan &#x27;member057&#x27;, FILTER=&gt;&quot;ValueFilter(=,&#x27;substring:6&#x27;)&quot;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"Hbase%E5%AE%9E%E9%AA%8C%E4%BA%8C.assets/1620199519312.png\" alt=\"1620199519312\"></p>\n<h3 id=\"列名中的前缀为-birth-的\"><a href=\"#列名中的前缀为-birth-的\" class=\"headerlink\" title=\"列名中的前缀为 birth 的\"></a>列名中的前缀为 birth 的</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">scan &#x27;member057&#x27;, FILTER=&gt;&quot;ColumnPrefixFilter(&#x27;birth&#x27;) &quot;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"Hbase%E5%AE%9E%E9%AA%8C%E4%BA%8C.assets/1620199523851.png\" alt=\"1620199523851\"></p>\n<h3 id=\"FILTER-中支持多个过滤条件通过括号、AND-和-OR-的条件组合\"><a href=\"#FILTER-中支持多个过滤条件通过括号、AND-和-OR-的条件组合\" class=\"headerlink\" title=\"FILTER 中支持多个过滤条件通过括号、AND 和 OR 的条件组合\"></a>FILTER 中支持多个过滤条件通过括号、AND 和 OR 的条件组合</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">scan &#x27;member057&#x27;, FILTER=&gt;&quot;ColumnPrefixFilter(&#x27;birth&#x27;) AND</span><br><span class=\"line\">ValueFilter ValueFilter(=,&#x27;substring:1988&#x27;)&quot;</span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"PrefixFilter-是对-Rowkey-的前缀进行判断-这是一个非常常用的功能。\"><a href=\"#PrefixFilter-是对-Rowkey-的前缀进行判断-这是一个非常常用的功能。\" class=\"headerlink\" title=\"PrefixFilter 是对 Rowkey 的前缀进行判断,这是一个非常常用的功能。\"></a>PrefixFilter 是对 Rowkey 的前缀进行判断,这是一个非常常用的功能。</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">scan &#x27;member057&#x27;, FILTER=&gt;&quot;PrefixFilter(&#x27;E&#x27;)&quot;</span><br></pre></td></tr></table></figure>\n\n<p><img src=\"Hbase%E5%AE%9E%E9%AA%8C%E4%BA%8C.assets/1620199530370.png\" alt=\"1620199530370\"></p>\n","categories":["hadoop"],"tags":["-hadoop"]},{"title":"hadoop伪分布式安装","url":"/2021/05/08/hadoop%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E5%AE%89%E8%A3%85/","content":"<h1 id=\"hadoop伪分布式安装\"><a href=\"#hadoop伪分布式安装\" class=\"headerlink\" title=\"hadoop伪分布式安装\"></a>hadoop伪分布式安装</h1><h2 id=\"1、安装jdk\"><a href=\"#1、安装jdk\" class=\"headerlink\" title=\"1、安装jdk\"></a>1、安装jdk</h2><h3 id=\"安装JDK\"><a href=\"#安装JDK\" class=\"headerlink\" title=\"安装JDK\"></a>安装JDK</h3><p>可以将所需的软件安装包放在一块，例如：~/software</p>\n<h4 id=\"（1）准备软件\"><a href=\"#（1）准备软件\" class=\"headerlink\" title=\"（1）准备软件\"></a>（1）准备软件</h4><p>JDK的安装包已经为大家准备好，在/root/software目录下，可以使用如下命令进行查看：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">cd /root/software/\t\t# 进入目录</span><br><span class=\"line\">ll\t\t\t\t\t# 罗列出当前文件或目录的详细信息，是ls -l的别名</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"（2）解压压缩包\"><a href=\"#（2）解压压缩包\" class=\"headerlink\" title=\"（2）解压压缩包\"></a>（2）解压压缩包</h4><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">tar -zxvf jdk-8u221-linux-x64.tar.gz</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"（3）在此处我们配置系统环境变量，使用命令：\"><a href=\"#（3）在此处我们配置系统环境变量，使用命令：\" class=\"headerlink\" title=\"（3）在此处我们配置系统环境变量，使用命令：\"></a>（3）在此处我们配置<strong>系统环境变量</strong>，使用命令：</h4><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">vim /etc/profile或者</span><br><span class=\"line\">vim ~/.bashrc                  //建议</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<h4 id=\"（4）在最后加入以下两行内容：\"><a href=\"#（4）在最后加入以下两行内容：\" class=\"headerlink\" title=\"（4）在最后加入以下两行内容：\"></a>（4）在最后加入以下两行内容：</h4><p><strong>路径为自己jdk路径</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">export JAVA_HOME=/root/software/jdk1.8.0_221  # 配置Java的安装目录，路径为自己jdk路径</span><br><span class=\"line\">export PATH=$PATH:$JAVA_HOME/bin  # 在原PATH的基础上加入JDK的bin目录</span><br></pre></td></tr></table></figure>\n\n<p>一定要注意PATH值的修改，<strong>一定要在引用原PATH值</strong>，否则Linux的很多操作命令就不能使用了。</p>\n<p><strong>注意：</strong></p>\n<ul>\n<li>export 是把这两个变量导出为全局变量。</li>\n<li>大小写必须严格区分。</li>\n</ul>\n<h4 id=\"（5）让配置文件立即生效，使用如下命令：\"><a href=\"#（5）让配置文件立即生效，使用如下命令：\" class=\"headerlink\" title=\"（5）让配置文件立即生效，使用如下命令：\"></a>（5）<strong>让配置文件立即生效</strong>，使用如下命令：</h4><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">上面修改那个文件就用那个命令</span><br><span class=\"line\">source /etc/profile</span><br><span class=\"line\"></span><br><span class=\"line\">source ~/.bashrc </span><br></pre></td></tr></table></figure>\n\n<h4 id=\"（6）检测JDK是否安装成功，使用命令查看JDK版本：\"><a href=\"#（6）检测JDK是否安装成功，使用命令查看JDK版本：\" class=\"headerlink\" title=\"（6）检测JDK是否安装成功，使用命令查看JDK版本：\"></a>（6）检测JDK是否安装成功，使用命令查看JDK版本：</h4><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">java -version</span><br><span class=\"line\">whereis java</span><br></pre></td></tr></table></figure>\n\n<p>执行此命令后，若是出现JDK版本信息说明配置成功</p>\n<h2 id=\"2、免密登录\"><a href=\"#2、免密登录\" class=\"headerlink\" title=\"2、免密登录\"></a>2、免密登录</h2><h3 id=\"配置SSH免密登录\"><a href=\"#配置SSH免密登录\" class=\"headerlink\" title=\"配置SSH免密登录\"></a>配置SSH免密登录</h3><h4 id=\"（1）下载SSH服务并启动\"><a href=\"#（1）下载SSH服务并启动\" class=\"headerlink\" title=\"（1）下载SSH服务并启动\"></a>（1）下载SSH服务并启动</h4><p>SSH服务（openssh-server和openssh-clients）已经为大家下载好，所以此处直接启动即可：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">/usr/sbin/sshd</span><br><span class=\"line\">sudo apt-get update</span><br><span class=\"line\">sudo apt install openssh-server</span><br><span class=\"line\">sudo apt install openssh-clients</span><br><span class=\"line\">sudo ps -e |grep ssh //查看是否启动如果没有则启动ssh</span><br><span class=\"line\">sudo service ssh start </span><br><span class=\"line\"></span><br><span class=\"line\">sudo vi /etc/ssh/sshd_config</span><br><span class=\"line\">在行&quot;#PermitRootLogin prohibit-password&quot;后</span><br><span class=\"line\"></span><br><span class=\"line\">添加行</span><br><span class=\"line\"></span><br><span class=\"line\">&quot;PermitRootLogin yes&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">并保存。</span><br><span class=\"line\">输入命令&quot;sudo update-rc.d ssh defaults&quot;开启ssh服务开机自启动</span><br><span class=\"line\">输入命令&quot;sudo service ssh start&quot;启动服务</span><br><span class=\"line\"></span><br><span class=\"line\">输入命令&quot;sudo service ssh status&quot;查看服务运行状态</span><br><span class=\"line\"></span><br><span class=\"line\">&quot;active(running)&quot;说明服务正常</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>安装完毕，运行命令</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">sudo vi /etc/ssh/sshd_config</span><br><span class=\"line\">//在行&quot;#PermitRootLogin prohibit-password&quot;后添加行并保存。</span><br><span class=\"line\"></span><br><span class=\"line\">PermitRootLogin yes</span><br><span class=\"line\"></span><br><span class=\"line\">//输入命令开启ssh服务开机自启动</span><br><span class=\"line\">sudo update-rc.d ssh defaults</span><br><span class=\"line\">//输入命令启动服务</span><br><span class=\"line\">sudo service ssh start</span><br><span class=\"line\">//输入命令查看服务运行状态</span><br><span class=\"line\">sudo service ssh status</span><br><span class=\"line\"></span><br><span class=\"line\">//&quot;active(running)&quot;说明服务正常</span><br></pre></td></tr></table></figure>\n\n<p>SSH服务启动成功后，默认开启<strong>22（SSH的默认端口）端口号</strong>，使用以下命令进行从查看：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">netstat -tnulp</span><br></pre></td></tr></table></figure>\n\n<p>执行命令，可以看到<strong>22号端口</strong>已经开启，证明我们SSH服务启动成功：<br><img src=\"http://assets.qingjiaoclass.com/image/20200206/8PJXrFA1Ij1580965846.png\" alt=\"image.png\"></p>\n<p>只要将SSH服务启动成功，我们就可以<strong>进行远程连接访问</strong>了。</p>\n<h4 id=\"（2）首先生成密钥对，使用命令：\"><a href=\"#（2）首先生成密钥对，使用命令：\" class=\"headerlink\" title=\"（2）首先生成密钥对，使用命令：\"></a>（2）<strong>首先生成密钥对，使用命令：</strong></h4><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">ssh-keygen</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\"># 或者</span></span></span><br><span class=\"line\">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>\n\n<p>上面一种是简写形式，提示要输入信息时不需要输入任何东西，<strong>直接回车三次即可</strong>。</p>\n<p>从打印信息中可以看出，私钥id_rsa和公钥id_rsa.pub都已创建成功，并放在 <strong>/root/.ssh</strong>（<strong>隐藏文件夹（以.开头）</strong>）目录中：</p>\n<h4 id=\"（3）将公钥放置到授权列表文件-authorized-keys中，使用命令：\"><a href=\"#（3）将公钥放置到授权列表文件-authorized-keys中，使用命令：\" class=\"headerlink\" title=\"（3）将公钥放置到授权列表文件 authorized_keys中，使用命令：\"></a>（3）将公钥放置到<strong>授权列表文件 authorized_keys</strong>中，使用命令：</h4><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">cd /root/.ssh</span><br><span class=\"line\">cp id_rsa.pub authorized_keys</span><br></pre></td></tr></table></figure>\n\n<p>注意：一定要<strong>授权列表文件 authorized_keys</strong>写对，不能改名。</p>\n<h4 id=\"（4）修改授权列表文件-authorized-keys-的权限，使用命令：\"><a href=\"#（4）修改授权列表文件-authorized-keys-的权限，使用命令：\" class=\"headerlink\" title=\"（4）修改授权列表文件 authorized_keys 的权限，使用命令：\"></a>（4）修改授权列表文件 authorized_keys 的权限，使用命令：</h4><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">chmod 600 authorized_keys</span><br></pre></td></tr></table></figure>\n\n<p>设置<strong>拥有者可读可写</strong>，其他人无任何权限（不可读、不可写、不可执行）。</p>\n<h4 id=\"（5）验证免密登录是否配置成功，使用如下命令：\"><a href=\"#（5）验证免密登录是否配置成功，使用如下命令：\" class=\"headerlink\" title=\"（5）验证免密登录是否配置成功，使用如下命令：\"></a>（5）验证免密登录是否配置成功，使用如下命令：</h4><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">ssh localhost  </span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\"># 或者</span></span></span><br><span class=\"line\">ssh e2d670ea9ad7</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"><span class=\"comment\"># 或者</span></span></span><br><span class=\"line\">ssh 10.141.0.42</span><br></pre></td></tr></table></figure>\n\n<ul>\n<li><strong>localhost</strong>：意为“本地主机”，指“这台计算机”</li>\n<li><strong>e2d670ea9ad7</strong>：本机主机名，可以使用<strong>hostname</strong>命令进行查看</li>\n<li><strong>10.141.0.42</strong>：本机IP地址，可以使用<strong>ifconfig</strong>命令进行查看</li>\n</ul>\n<h4 id=\"（6）远程登录成功后，若想退出，可以使用exit命令。\"><a href=\"#（6）远程登录成功后，若想退出，可以使用exit命令。\" class=\"headerlink\" title=\"（6）远程登录成功后，若想退出，可以使用exit命令。\"></a>（6）远程登录成功后，若想退出，可以使用<strong>exit</strong>命令。</h4><h2 id=\"3、安装hadoop\"><a href=\"#3、安装hadoop\" class=\"headerlink\" title=\"3、安装hadoop\"></a>3、安装hadoop</h2><h3 id=\"1-进入到-root-software目录，解压Hadoop；\"><a href=\"#1-进入到-root-software目录，解压Hadoop；\" class=\"headerlink\" title=\"1. 进入到/root/software目录，解压Hadoop；\"></a>1. 进入到/root/software目录，解压Hadoop；</h3><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">cd /root/software</span><br><span class=\"line\">tar -zxvf hadoop-2.7.7.tar.gz -C /root/software</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2-配置Hadoop系统变量\"><a href=\"#2-配置Hadoop系统变量\" class=\"headerlink\" title=\"2. 配置Hadoop系统变量\"></a>2. 配置Hadoop系统变量</h3><h4 id=\"1-首先打开-etc-profile文件（系统环境变量：对所有用户有效）：\"><a href=\"#1-首先打开-etc-profile文件（系统环境变量：对所有用户有效）：\" class=\"headerlink\" title=\"(1) 首先打开/etc/profile文件（系统环境变量：对所有用户有效）：\"></a>(1) 首先打开/etc/profile文件（系统环境变量：对所有用户有效）：</h4><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">vim /etc/profile或者</span><br><span class=\"line\"></span><br><span class=\"line\">vim ~/.bashrc #建议用这种方式</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"2-在文件底部添加如下内容：\"><a href=\"#2-在文件底部添加如下内容：\" class=\"headerlink\" title=\"(2) 在文件底部添加如下内容：\"></a>(2) 在文件底部添加如下内容：</h4><figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 配置Hadoop的安装目录</span></span><br><span class=\"line\">export HADOOP_HOME=/root/software/hadoop-2.7.7</span><br><span class=\"line\"><span class=\"meta\">#</span><span class=\"bash\"> 在原PATH的基础上加入Hadoop的bin和sbin目录</span></span><br><span class=\"line\">export PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin</span><br></pre></td></tr></table></figure>\n\n<p>生效环境变量：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">//上面用那种方式就用那种方式，第二种（亲测）</span><br><span class=\"line\">source /etc/profile</span><br><span class=\"line\"></span><br><span class=\"line\">source ~/.bashrc</span><br></pre></td></tr></table></figure>\n\n\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">whereis hdfs</span><br><span class=\"line\">whereis start-all.sh</span><br><span class=\"line\">//显示出路径则为环境配置成功</span><br></pre></td></tr></table></figure>\n\n\n\n<h2 id=\"4、配置HDFScor\"><a href=\"#4、配置HDFScor\" class=\"headerlink\" title=\"4、配置HDFScor\"></a>4、配置HDFScor</h2><h3 id=\"配置HDFS\"><a href=\"#配置HDFS\" class=\"headerlink\" title=\"配置HDFS\"></a>配置HDFS</h3><h4 id=\"1-配置环境变量hadoop-env-sh\"><a href=\"#1-配置环境变量hadoop-env-sh\" class=\"headerlink\" title=\"1. 配置环境变量hadoop-env.sh\"></a>1. 配置环境变量hadoop-env.sh</h4><p>打开hadoop-env.sh文件：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">vim /root/software/hadoop-2.7.7/etc/hadoop/hadoop-env.sh</span><br></pre></td></tr></table></figure>\n\n<p>找到JAVA_HOME参数位置，<strong>修改为本机安装的JDK的实际位置</strong>：</p>\n<p>在命令模式下输入 <code>:set nu</code> 可以为vi设置行号。</p>\n<h4 id=\"2-配置核心组件core-site-xml\"><a href=\"#2-配置核心组件core-site-xml\" class=\"headerlink\" title=\"2. 配置核心组件core-site.xml\"></a>2. 配置核心组件core-site.xml</h4><p>该文件是<strong>Hadoop的核心配置文件</strong>，其目的是<strong>配置HDFS地址</strong>、<strong>端口号</strong>，以及<strong>临时文件目录</strong>。使用如下命令<strong>打开“core-site.xml”文件</strong>：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">vim /root/software/hadoop-2.7.7/etc/hadoop/core-site.xml</span><br></pre></td></tr></table></figure>\n\n<p>将下面的配置内容添加到 <code>&lt;configuration&gt;&lt;/configuration&gt;</code> 中间：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- HDFS集群中NameNode的URI（包括协议、主机名称、端口号），默认为 file:/// --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>fs.defaultFS<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 用于指定NameNode的地址 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>hdfs://localhost:9000<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- Hadoop运行时产生文件的临时存储目录 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>hadoop.tmp.dir<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 该路径为自己用户 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>/root/hadoopData/temp<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"3-配置文件系统hdfs-site-xml\"><a href=\"#3-配置文件系统hdfs-site-xml\" class=\"headerlink\" title=\"3. 配置文件系统hdfs-site.xml\"></a>3. 配置文件系统hdfs-site.xml</h4><p>该文件主要用于<strong>配置 HDFS 相关的属性</strong>，例如<strong>复制因子（即数据块的副本数）</strong>、<strong>NameNode 和 DataNode 用于存储数据的目录</strong>等。在<strong>完全分布式模式</strong>下，默认数据块副本是<strong>3 份</strong>。 使用如下命令<strong>打开“hdfs-site.xml”文件</strong>：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">vim /root/software/hadoop-2.7.7/etc/hadoop/hdfs-site.xml</span><br></pre></td></tr></table></figure>\n\n<p>将下面的配置内容添加到 <code>&lt;configuration&gt;&lt;/configuration&gt;</code> 中间：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- NameNode在本地文件系统中持久存储命名空间和事务日志的路径 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.namenode.name.dir<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>/root/hadoopData/name<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- DataNode在本地文件系统中存放块的路径 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.datanode.data.dir<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\">    <span class=\"comment\">&lt;!-- 该路径为自己用户 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>/root/hadoopData/data<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"comment\">&lt;!-- 数据块副本的数量，默认为3 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>dfs.replication<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>1<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h4 id=\"4-配置slaves文件（无需修改）\"><a href=\"#4-配置slaves文件（无需修改）\" class=\"headerlink\" title=\"4. 配置slaves文件（无需修改）\"></a>4. 配置slaves文件（无需修改）</h4><p>该文件用于<strong>记录Hadoop集群所有从节点</strong>（HDFS的DataNode<em>和</em>YARN的NodeManager所在主机）的主机名，用来配合<strong>一键启动</strong>脚本启动集群从节点（并且还需要保证关联节点配置了<strong>SSH免密登录</strong>）。</p>\n<p>打开该配置文件：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">vim /root/software/hadoop-2.7.7/etc/hadoop/slaves</span><br></pre></td></tr></table></figure>\n\n<p>我们看到其默认内容为<strong>localhost</strong>，因为我们搭建的是<strong>伪分布式集群</strong>，就只有一台主机，所以从节点也需要放在此主机上，所以<strong>此配置文件无需修改</strong>。</p>\n<h4 id=\"5-格式化文件系统\"><a href=\"#5-格式化文件系统\" class=\"headerlink\" title=\"5.格式化文件系统\"></a>5.格式化文件系统</h4><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">hdfs namenode -format</span><br></pre></td></tr></table></figure>\n\n<h4 id=\"6-脚本一键启动hdfs\"><a href=\"#6-脚本一键启动hdfs\" class=\"headerlink\" title=\"6. 脚本一键启动hdfs\"></a>6. 脚本一键启动hdfs</h4><p>启动集群<strong>最常使用的方式</strong>是使用脚本一键启动，前提是<strong>需要配置 slaves 配置文件和 SSH免密登录</strong>。</p>\n<ul>\n<li><strong>在本机上使用如下方式一键启动HDFS集群：</strong></li>\n</ul>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">start-dfs.sh</span><br></pre></td></tr></table></figure>\n\n<p>在本机上执行 <code>jps</code> 命令，在打印结果中会看到<strong>4</strong> 个进程，分别是 <strong>NameNode</strong>、<strong>SecondaryNameNode</strong>、<strong>Jps</strong>、和<strong>DataNode</strong>，如果出现了这 4 个进程表示HDFS启动成功。</p>\n<h2 id=\"5、安装yarn\"><a href=\"#5、安装yarn\" class=\"headerlink\" title=\"5、安装yarn\"></a>5、安装yarn</h2><p>Yarn主要配置文件说明如下：<br><img src=\"https://assets.qingjiaoclass.com/qyzpbaerkbax/20210414/bkqoojnq_bfZGTPFz1UaOe8TXCf0Q\" alt=\"img\"></p>\n<h3 id=\"1-配置环境变量yarn-env-sh\"><a href=\"#1-配置环境变量yarn-env-sh\" class=\"headerlink\" title=\"1. 配置环境变量yarn-env.sh\"></a>1. 配置环境变量yarn-env.sh</h3><p>该文件是<strong>YARN框架运行环境的配置</strong>，同样需要<strong>修改JDK所在位置</strong>。</p>\n<p>使用如下命令打开“yarn-env.sh”文件：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">vim /root/software/hadoop-2.7.7/etc/hadoop/yarn-env.sh</span><br></pre></td></tr></table></figure>\n\n<p>找到JAVA_HOME参数位置，将前面的#去掉，将其值修改为本机安装的JDK的实际位置：<br><img src=\"http://assets.qingjiaoclass.com/image/20200207/Zn1Xo7erlh1581045238.png\" alt=\"image.png\"></p>\n<p>在命令模式下输入 <code>:set nu</code> 可以为vi设置行号。</p>\n<h3 id=\"2-配置计算框架mapred-site-xml\"><a href=\"#2-配置计算框架mapred-site-xml\" class=\"headerlink\" title=\"2. 配置计算框架mapred-site.xml\"></a>2. 配置计算框架mapred-site.xml</h3><p>在$HADOOP_HOME/etc/hadoop/目录中默认没有该文件，需要先通过如下命令将文件<strong>复制并重命名为“mapred-site.xml”</strong>：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">cp mapred-site.xml.template mapred-site.xml</span><br></pre></td></tr></table></figure>\n\n<p>接着，打开“mapred-site.xml”文件进行修改：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">vim /root/software/hadoop-2.7.7/etc/hadoop/mapred-site.xml</span><br></pre></td></tr></table></figure>\n\n<p>将下面的配置内容添加到 中间：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- 指定使用 YARN 运行 MapReduce 程序，默认为 local --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>mapreduce.framework.name<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>yarn<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<p>效果如下图所示：<br><img src=\"http://assets.qingjiaoclass.com/image/20200207/B6gnrtwbWK1581045450.png\" alt=\"image.png\"></p>\n<h3 id=\"3-配置YARN系统yarn-site-xml\"><a href=\"#3-配置YARN系统yarn-site-xml\" class=\"headerlink\" title=\"3. 配置YARN系统yarn-site.xml\"></a>3. 配置YARN系统yarn-site.xml</h3><p>本文件是<strong>YARN框架的核心配置文件</strong>，用于<strong>配置 YARN 进程及 YARN 的相关属性</strong>。</p>\n<p>使用如下命令打开该配置文件：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">vim /root/software/hadoop-2.7.7/etc/hadoop/yarn-site.xml</span><br></pre></td></tr></table></figure>\n\n<p>将下面的配置内容加入中间：</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!-- NodeManager上运行的附属服务，也可以理解为 mapreduce 获取数据的方式 --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">property</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">name</span>&gt;</span>yarn.nodemanager.aux-services<span class=\"tag\">&lt;/<span class=\"name\">name</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">value</span>&gt;</span>mapreduce_shuffle<span class=\"tag\">&lt;/<span class=\"name\">value</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">property</span>&gt;</span></span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-启动集群\"><a href=\"#4-启动集群\" class=\"headerlink\" title=\"4. 启动集群\"></a>4. 启动集群</h3><p>在本机上使用如下方式<strong>一键启动YARN集群</strong>：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"code\"><pre><span class=\"line\">start-yarn.sh</span><br></pre></td></tr></table></figure>\n\n<p>ps：start-dfs.sh和start-yarn.sh也是sbin目录下的脚本文件。</p>\n<p><strong>效果图如下所示：</strong></p>\n<p><strong>打印信息：</strong></p>\n<ul>\n<li>在本机上启动了 ResourceManager守护进程</li>\n<li>在本机上启动了 NodeManager 守护进程</li>\n</ul>\n<p>通过本机的浏览器访问<strong><a href=\"http://localhost:8088/\">http://localhost:8088</a></strong>或<strong>http://本机IP地址:8088</strong>查看YARN集群状态，效果如下图所示：</p>\n<h2 id=\"测试hadoop\"><a href=\"#测试hadoop\" class=\"headerlink\" title=\"测试hadoop\"></a>测试hadoop</h2><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">创建一个data.txt用wordcount测试</span><br><span class=\"line\">hadoop@hadoop:~$ vi data.txt</span><br><span class=\"line\">创建input文件加夹</span><br><span class=\"line\">hadoop@hadoop:~$ hdfs dfs -mkdir /input</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>hdfs命令</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">hdfs dfs -linux命令 /input或者/output</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>上传data.txt</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">hadoop@hadoop:~$ hdfs dfs -put data.txt /input</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>查看上传是否成功</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">hadoop@hadoop:~$ hdfs dfs -ls /input</span><br><span class=\"line\">Found 1 items</span><br><span class=\"line\">-rw-r--r--   1 hadoop supergroup         25 2021-04-30 23:47 /input/data.txt</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>运行wordCount程序</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">hadoop@hadoop:~$ cd ~/software/hadoop-2.7.7/share/hadoop/mapreduce</span><br><span class=\"line\">hadoop@hadoop:~/software/hadoop-2.7.7/share/hadoop/mapreduce$ hadoop jar hadoop-mapreduce-examples-2.7.7.jar wordcount /input/data.txt /output</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>查看output文件夹</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">hdfs dfs -ls /output</span><br><span class=\"line\">Found 2 items</span><br><span class=\"line\">-rw-r--r--   1 hadoop supergroup          0 2021-04-30 23:56 /output/_SUCCESS</span><br><span class=\"line\">-rw-r--r--   1 hadoop supergroup         25 </span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<p>查看运行结果</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">2021-04-30 23:56 /output/part-r-00000</span><br><span class=\"line\">hadoop@hadoop:~/software/hadoop-2.7.7/share/hadoop/mapreduce$ hdfs dfs -cat /output/part-r-00000</span><br><span class=\"line\">hadoop\t1</span><br><span class=\"line\">hello\t2</span><br><span class=\"line\">world\t1</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n","categories":["hadoop"],"tags":["-hadoop"]},{"title":"图片测试","url":"/2021/05/08/%E5%9B%BE%E7%89%87%E6%B5%8B%E8%AF%95/","content":"<p><img src=\"%E5%9B%BE%E7%89%87%E6%B5%8B%E8%AF%95/1620444119608.png\" alt=\"1620444119608\"></p>\n"},{"title":"Hbase安装","url":"/2021/05/06/Hbase%E5%AE%89%E8%A3%85/","content":"<h1 id=\"Hbase实验一\"><a href=\"#Hbase实验一\" class=\"headerlink\" title=\"Hbase实验一\"></a>Hbase实验一</h1><p>zookeeper-3.4.14</p>\n<p><strong>~/.bashrc 内容</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">software下的解压后创建软连接避免输入错误</span><br><span class=\"line\">例：</span><br><span class=\"line\">in -s hbase-2.2.7 hbase</span><br><span class=\"line\">...jdk</span><br><span class=\"line\">...hadoop</span><br></pre></td></tr></table></figure>\n\n<span id=\"more\"></span>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\"># 配置Hadoop的安装目录</span><br><span class=\"line\">export HADOOP_HOME=/home/hadoop/software/hadoop</span><br><span class=\"line\"># 在原PATH的基础上加入Hadoop的bin和sbin目录</span><br><span class=\"line\">export PATH=$PATH:$HADOOP_HOME/bin:$HADOOP_HOME/sbin</span><br><span class=\"line\">export JAVA_HOME=/home/hadoop/software/jdk  # 配置Java的安装目录</span><br><span class=\"line\">export PATH=$PATH:$JAVA_HOME/bin  # 在原PATH的基础上加入JDK的bin目录</span><br><span class=\"line\">export HBASE_HOME=/home/hadoop/software/hbase</span><br><span class=\"line\">export PATH=$PATH:$HBASE_HOME/bin</span><br><span class=\"line\">export ZOOKEEPER_HOME=/home/hadoop/software/zookeeper</span><br><span class=\"line\">export PATH=$PATH:$ZOOKEEPER_HOME/bin</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n\n\n<h3 id=\"1、HBase的安装\"><a href=\"#1、HBase的安装\" class=\"headerlink\" title=\"1、HBase的安装\"></a>1、HBase的安装</h3><h5 id=\"解压hbase\"><a href=\"#解压hbase\" class=\"headerlink\" title=\"解压hbase\"></a>解压hbase</h5><p> 进入/home/hadoop/<strong>software</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">tar -zxvf hbase-2.7.7-bin.tar.gz</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"配置环境变量\"><a href=\"#配置环境变量\" class=\"headerlink\" title=\"配置环境变量\"></a>配置环境变量</h5><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">vi ~/.bashrc</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">export HBASE_HOME=/home/hadoop/software/hbase</span><br><span class=\"line\">export PATH=$PATH:$HBASE_HOME/bin</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"使环境变量生效\"><a href=\"#使环境变量生效\" class=\"headerlink\" title=\"使环境变量生效\"></a>使环境变量生效</h5><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">source ~/.bashrc</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"2、伪分布式集群\"><a href=\"#2、伪分布式集群\" class=\"headerlink\" title=\"2、伪分布式集群\"></a>2、伪分布式集群</h3><h5 id=\"修改hbase-env-sh\"><a href=\"#修改hbase-env-sh\" class=\"headerlink\" title=\"修改hbase-env.sh\"></a>修改hbase-env.sh</h5><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">cd ~/hbase/conf</span><br><span class=\"line\">vi hbase-env.sh</span><br></pre></td></tr></table></figure>\n\n<p>打开在其中添加</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">export JAVA_HOME=/home/hadoop/software/jdk</span><br><span class=\"line\">export HBASE_MANAGES_ZK=true</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"修改hbase-env-sh-1\"><a href=\"#修改hbase-env-sh-1\" class=\"headerlink\" title=\"修改hbase-env.sh\"></a>修改hbase-env.sh</h5><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">cd ~/hbase/conf</span><br><span class=\"line\">vi hbase-site.xml</span><br></pre></td></tr></table></figure>\n\n<p>修改为 </p>\n<p>**注：hdfs节点名称与hdfs的core-site.xml文件相同</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">&lt;name&gt;hbase.rootdir&lt;/name&gt;</span><br><span class=\"line\">&lt;value&gt;hdfs://localhost:9000/hbase&lt;/value&gt;</span><br><span class=\"line\">&lt;/property&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">&lt;name&gt;hbase.cluster.distributed&lt;/name&gt;</span><br><span class=\"line\">&lt;value&gt;true&lt;/value&gt;</span><br><span class=\"line\">&lt;/property&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">&lt;name&gt;hbase.zookeeper.quorum&lt;/name&gt;</span><br><span class=\"line\">&lt;value&gt;hadoop&lt;/value&gt;</span><br><span class=\"line\">&lt;/property&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">&lt;name&gt;dfs.replication&lt;/name&gt;</span><br><span class=\"line\">&lt;value&gt;1&lt;/value&gt;</span><br><span class=\"line\">&lt;/property&gt;</span><br><span class=\"line\"></span><br><span class=\"line\">&lt;property&gt;</span><br><span class=\"line\">&lt;name&gt;hbase.zookeeper.property.dataDir&lt;/name&gt;</span><br><span class=\"line\">&lt;value&gt;/home/hadoop/software/hbase/zookeeper&lt;/value&gt;</span><br><span class=\"line\">&lt;/property&gt;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n\n<h5 id=\"启动HBase\"><a href=\"#启动HBase\" class=\"headerlink\" title=\"启动HBase\"></a>启动HBase</h5><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">start-hbase.sh</span><br></pre></td></tr></table></figure>\n\n<h5 id=\"检查进程\"><a href=\"#检查进程\" class=\"headerlink\" title=\"检查进程\"></a>检查进程</h5><figure class=\"highlight plaintext\"><table><tr><td class=\"code\"><pre><span class=\"line\">jps</span><br></pre></td></tr></table></figure>\n\n"},{"title":"Hello World","url":"/2021/05/06/hello-world/","content":"<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<span id=\"more\"></span>\n\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n"}]